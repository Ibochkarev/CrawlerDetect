# CrawlerDetect — Определение ботов и защита форм от спама для MODX 3

Определение веб-краулеров (ботов) по User-Agent и защита форм от спама без CAPTCHA. Использует библиотеку [JayBizzle/Crawler-Detect](https://github.com/JayBizzle/Crawler-Detect).

---

## Ключевые особенности

- **Определение ботов** — по заголовку User-Agent и HTTP_FROM (библиотека JayBizzle/Crawler-Detect).
- **Защита форм** — один preHook `crawlerDetectBlock` для FormIt; блокирует отправку форм ботами без CAPTCHA.
- **Скрытие контента** — сниппет `isCrawler` для условного вывода виджетов, аналитики, счётчиков.
- **Интеграция** — FormIt (preHooks), FetchIt (через FormIt).
- **Настройки** — текст сообщения при блокировке, опция логирования.
- **Без Composer на сервере** — зависимости уже в пакете.

---

## Как это работает

1. **Защита формы:** добавьте `crawlerDetectBlock` в `&preHooks` вызова FormIt.
2. При отправке формы FormIt вызывает preHook до валидации.
3. Если User-Agent — бот → форма не обрабатывается, показывается настраиваемое сообщение.
4. Если человек → форма обрабатывается как обычно.

**Скрытие виджета от ботов:** вызывайте сниппет счётчика/чата только когда `isCrawler` возвращает `0`.

---

## Настройки

| Настройка | Описание |
|-----------|----------|
| `crawlerdetect_block_message` | Текст при блокировке формы ботом |
| `crawlerdetect_log_blocked` | Логировать заблокированные попытки в лог MODX |

---

## Стек

- **Backend:** PHP 8.2+, MODX Revolution 3.x, JayBizzle/Crawler-Detect.
- **Зависимости:** FormIt (для защиты форм), FetchIt (опционально, для AJAX-форм).
